{"Source Block": ["hdl/library/jesd204/jesd204_rx/jesd204_rx.v@203:220@HdlStmProcess", "reg [NUM_LANES-1:0] frame_align_err_thresh_met = {NUM_LANES{1'b0}};\nreg [NUM_LANES-1:0] event_frame_alignment_error_per_lane = {NUM_LANES{1'b0}};\n\nreg buffer_release_opportunity = 1'b0;\n\nalways @(posedge device_clk) begin\n  if (lmfc_counter == device_cfg_buffer_delay ||\n      device_cfg_buffer_early_release == 1'b1) begin\n    buffer_release_opportunity <= 1'b1;\n  end else begin\n    buffer_release_opportunity <= 1'b0;\n  end\nend\n\nassign all_buffer_ready_n = |(buffer_ready_n & ~cfg_lanes_disable);\n\nsync_bits #(\n  .NUM_OF_BITS (1),\n"], "Clone Blocks": [["hdl/library/jesd204/jesd204_rx/jesd204_rx.v@201:211", "wire lmfc_edge_synced;\n\nreg [NUM_LANES-1:0] frame_align_err_thresh_met = {NUM_LANES{1'b0}};\nreg [NUM_LANES-1:0] event_frame_alignment_error_per_lane = {NUM_LANES{1'b0}};\n\nreg buffer_release_opportunity = 1'b0;\n\nalways @(posedge device_clk) begin\n  if (lmfc_counter == device_cfg_buffer_delay ||\n      device_cfg_buffer_early_release == 1'b1) begin\n    buffer_release_opportunity <= 1'b1;\n"]], "Diff Content": {"Delete": [[208, "always @(posedge device_clk) begin\n"], [209, "  if (lmfc_counter == device_cfg_buffer_delay ||\n"], [210, "      device_cfg_buffer_early_release == 1'b1) begin\n"], [211, "    buffer_release_opportunity <= 1'b1;\n"], [212, "  end else begin\n"], [213, "    buffer_release_opportunity <= 1'b0;\n"], [215, "end\n"]], "Add": [[213, "  /*\n"], [213, "   * Can be used to enable additional pipeline stages to ease timing. Usually not\n"], [213, "   * necessary.\n"], [213, "   */\n"], [213, "  localparam CHAR_INFO_REGISTERED = 0;\n"], [213, "  localparam ALIGN_MUX_REGISTERED = 1;\n"], [213, "  localparam SCRAMBLER_REGISTERED = 0;\n"], [213, "  /*\n"], [213, "   * Maximum number of octets per multiframe for ADI JESD204 DACs is 256 (Adjust\n"], [213, "   * as necessary). Divide by data path width.\n"], [213, "   */\n"], [213, "  localparam MAX_OCTETS_PER_FRAME = 32;\n"], [213, "  localparam MAX_OCTETS_PER_MULTIFRAME =\n"], [213, "    (MAX_OCTETS_PER_FRAME * 32) > 1024 ? 1024 : (MAX_OCTETS_PER_FRAME * 32);\n"], [213, "  localparam MAX_BEATS_PER_MULTIFRAME = MAX_OCTETS_PER_MULTIFRAME / DATA_PATH_WIDTH;\n"], [213, "  localparam ELASTIC_BUFFER_SIZE = MAX_BEATS_PER_MULTIFRAME;\n"], [213, "  localparam DPW_LOG2 = DATA_PATH_WIDTH == 8 ? 3 : DATA_PATH_WIDTH == 4 ? 2 : 1;\n"], [213, "  localparam LMFC_COUNTER_WIDTH = MAX_BEATS_PER_MULTIFRAME > 256 ? 9 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 128 ? 8 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 64 ? 7 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 32 ? 6 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 16 ? 5 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 8 ? 4 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 4 ? 3 :\n"], [213, "    MAX_BEATS_PER_MULTIFRAME > 2 ? 2 : 1;\n"], [213, "  /* Helper for common expressions */\n"], [213, "  localparam DW = 8*DATA_PATH_WIDTH*NUM_LANES;\n"], [213, "  localparam ODW = 8*TPL_DATA_PATH_WIDTH*NUM_LANES;\n"], [213, "  localparam CW = DATA_PATH_WIDTH*NUM_LANES;\n"], [213, "  localparam HW = 2*NUM_LANES;\n"], [213, "  wire [7:0] cfg_beats_per_multiframe = cfg_octets_per_multiframe >> DPW_LOG2;\n"], [213, "  wire [7:0] device_cfg_beats_per_multiframe_s;\n"], [213, "  wire [NUM_LANES-1:0] cgs_reset;\n"], [213, "  wire [NUM_LANES-1:0] cgs_ready;\n"], [213, "  wire [NUM_LANES-1:0] ifs_reset;\n"], [213, "  reg buffer_release_n = 1'b1;\n"], [213, "  reg buffer_release_d1 = 1'b0;\n"], [213, "  wire [NUM_LANES-1:0] buffer_ready_n;\n"], [213, "  wire all_buffer_ready_n;\n"], [213, "  wire dev_all_buffer_ready_n;\n"], [213, "  reg eof_reset = 1'b1;\n"], [213, "  wire [DW-1:0] phy_data_r;\n"], [213, "  wire [HW-1:0] phy_header_r;\n"], [213, "  wire [CW-1:0] phy_charisk_r;\n"], [213, "  wire [CW-1:0] phy_notintable_r;\n"], [213, "  wire [CW-1:0] phy_disperr_r;\n"], [213, "  wire [NUM_LANES-1:0] phy_block_sync_r;\n"], [213, "  wire [ODW-1:0] rx_data_s;\n"], [213, "  wire rx_valid_s = buffer_release_d1;\n"], [213, "  wire [7:0] lmfc_counter;\n"], [213, "  wire latency_monitor_reset;\n"], [213, "  wire [3*NUM_LANES-1:0] frame_align;\n"], [213, "  wire [NUM_LANES-1:0] ifs_ready;\n"], [213, "  wire event_data_phase;\n"], [213, "  wire err_statistics_reset;\n"], [213, "  wire lmfc_edge_synced;\n"], [213, "  reg [NUM_LANES-1:0] frame_align_err_thresh_met = {NUM_LANES{1'b0}};\n"], [213, "  reg [NUM_LANES-1:0] event_frame_alignment_error_per_lane = {NUM_LANES{1'b0}};\n"], [213, "  reg buffer_release_opportunity = 1'b0;\n"], [213, "  always @(posedge device_clk) begin\n"], [213, "    if (lmfc_counter == device_cfg_buffer_delay ||\n"], [213, "        device_cfg_buffer_early_release == 1'b1) begin\n"], [213, "      buffer_release_opportunity <= 1'b1;\n"], [213, "    end else begin\n"], [213, "      buffer_release_opportunity <= 1'b0;\n"], [213, "    end\n"]]}}