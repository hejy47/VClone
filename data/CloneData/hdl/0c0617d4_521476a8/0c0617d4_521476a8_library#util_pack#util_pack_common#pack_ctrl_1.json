{"Source Block": ["hdl/library/util_pack/util_pack_common/pack_ctrl.v@64:91@HdlStmFor", "  integer n;\n\n  localparam z = 2**MUX_ORDER;\n\n  /* This part is magic */\n  for (i = 0; i < NUM_STAGES; i = i + 1) begin: ctrl_gen_outer\n    localparam k0 = 2**(PORT_ADDRESS_WIDTH - MUX_ORDER*(i+1)-MIN_STAGE);\n    localparam k1 = 2**(MUX_ORDER*(1+i)+MIN_STAGE);\n\n    for (j = 0; j < NUM_OF_PORTS; j = j + 1) begin: ctrl_gen_inner\n      /* Offset in the ctrl signal */\n      localparam s = (i*NUM_OF_PORTS+j)*MUX_ORDER;\n      localparam m = (j % k1) * k0;\n      localparam n = j / k1;\n\n      if (MUX_ORDER == 1 && j % 2 == 0) begin\n        /* This is an optimization that only works for 2:1 MUXes */\n        assign ctrl1[s] = ~ctrl1[s+1];\n      end else begin\n        assign ctrl1[s+:MUX_ORDER] = (j - (prefix_count[m*PORT_ADDRESS_WIDTH+:PORT_ADDRESS_WIDTH] + n - rotate) / k0) % z;\n      end\n    end\n  end\n\n  if (PACK == 0 || MUX_ORDER == 1) begin\n    /* For 2:1 MUXes pack and unpack control is the same */\n    assign ctrl = ctrl1;\n  end else begin\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[74, "      /* Offset in the ctrl signal */\n"], [80, "        /* This is an optimization that only works for 2:1 MUXes */\n"]], "Add": []}}