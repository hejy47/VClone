{"Source Block": ["hdl/library/cn0363/cn0363_phase_data_sync/cn0363_phase_data_sync.v@78:101@HdlStmProcess", "\n// Conversion from offset binary to signed on data\nassign m_axis_sample_data = {~sample_hold[23],sample_hold[22:0]};\nassign m_axis_phase_data = phase_hold;\n\nalways @(posedge clk) begin\n  if (conv_done_d1 == 1'b0 && conv_done == 1'b1) begin\n    // Is the processing pipeline ready to accept data?\n    if (m_axis_sample_valid | m_axis_phase_valid | ~processing_resetn) begin\n      overflow <= 1'b1;\n    end else begin\n      phase_hold <= phase;\n      overflow <= 1'b0;\n    end\n  end else begin\n    overflow <= 1'b0;\n  end\n  conv_done_d1 <= conv_done;\nend\n\nalways @(posedge clk) begin\n  if (processing_resetn == 1'b0) begin\n    m_axis_phase_valid <= 1'b0;\n    m_axis_sample_valid <= 1'b0;\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[83, "always @(posedge clk) begin\n"], [84, "  if (conv_done_d1 == 1'b0 && conv_done == 1'b1) begin\n"], [86, "    if (m_axis_sample_valid | m_axis_phase_valid | ~processing_resetn) begin\n"], [87, "      overflow <= 1'b1;\n"], [89, "      phase_hold <= phase;\n"], [92, "  end else begin\n"], [93, "    overflow <= 1'b0;\n"], [95, "  conv_done_d1 <= conv_done;\n"], [96, "end\n"]], "Add": [[87, "  reg [1:0] data_counter = 'h00;\n"], [87, "  reg [31:0] phase_hold = 'h00;\n"], [87, "  reg [23:0] sample_hold = 'h00;\n"], [87, "  reg sample_hold_valid = 1'b0;\n"], [87, "  reg conv_done_d1 = 1'b0;\n"], [87, "  reg synced = 1'b0;\n"], [87, "  wire sync;\n"], [87, "  /* The ADC will do conversions regardless of whether the pipeline is ready or\n"], [87, "     not. So we'll always accept new samples and assert overflow if necessary if\n"], [87, "     the pipeline is not ready. */\n"], [87, "  assign s_axis_sample_ready = 1'b1;\n"], [87, "  assign m_axis_sample_data = {~sample_hold[23],sample_hold[22:0]};\n"], [87, "  assign m_axis_phase_data = phase_hold;\n"], [87, "  always @(posedge clk) begin\n"], [87, "    if (conv_done_d1 == 1'b0 && conv_done == 1'b1) begin\n"], [87, "      if (m_axis_sample_valid | m_axis_phase_valid | ~processing_resetn) begin\n"], [87, "        overflow <= 1'b1;\n"], [87, "      end else begin\n"], [87, "        phase_hold <= phase;\n"], [87, "        overflow <= 1'b0;\n"], [87, "      end\n"], [93, "    conv_done_d1 <= conv_done;\n"]]}}