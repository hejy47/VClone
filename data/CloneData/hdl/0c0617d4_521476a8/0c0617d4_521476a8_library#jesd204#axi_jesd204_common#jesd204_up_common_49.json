{"Source Block": ["hdl/library/jesd204/axi_jesd204_common/jesd204_up_common.v@356:421@HdlStmProcess", "  end else begin\n    up_irq_clear = {NUM_IRQS{1'b0}};\n  end\nend\n\nalways @(posedge up_clk) begin\n  if (up_reset == 1'b1) begin\n    up_scratch <= 'h00;\n    up_irq_enable <= {NUM_IRQS{1'b0}};\n    up_reset_core <= 1'b1;\n\n    up_cfg_octets_per_frame <= 'h00;\n    up_cfg_octets_per_multiframe <= {DATA_PATH_WIDTH_LOG2{1'b1}};\n    up_cfg_lanes_disable <= {NUM_LANES{1'b0}};\n    up_cfg_links_disable <= {NUM_LINKS{1'b0}};\n    up_cfg_beats_per_multiframe <= 'h00;\n\n    up_cfg_disable_char_replacement <= 1'b0;\n    up_cfg_disable_scrambler <= 1'b0;\n  end else if (up_wreq == 1'b1) begin\n    case (up_waddr)\n    /* Standard registers */\n    12'h002: up_scratch <= up_wdata;\n\n    /* IRQ block */\n    12'h020: up_irq_enable <= up_wdata[NUM_IRQS-1:0];\n\n    /* JESD common control */\n    12'h030: up_reset_core <= up_wdata[0];\n\n    endcase\n\n    /*\n     * The configuration needs to be static while the core is\n     * active. To enforce this writes to configuration registers\n     * will be ignored while the core is out of reset.\n     */\n    if (up_cfg_is_writeable == 1'b1) begin\n      case (up_waddr)\n      12'h080: begin\n        up_cfg_lanes_disable <= up_wdata[NUM_LANES-1:0];\n      end\n      12'h084: begin\n        up_cfg_octets_per_frame <= up_wdata[23:16];\n        up_cfg_octets_per_multiframe <= {up_wdata[9:DATA_PATH_WIDTH_LOG2],\n                                        {DATA_PATH_WIDTH_LOG2{1'b1}}};\n      end\n      12'h085: begin\n        up_cfg_disable_char_replacement <= up_wdata[1];\n        up_cfg_disable_scrambler <= up_wdata[0];\n      end\n      12'h086: begin\n        up_cfg_links_disable <= up_wdata[NUM_LINKS-1:0];\n      end\n      12'h087: begin\n        up_cfg_beats_per_multiframe <= up_wdata[7:0];\n      end\n      endcase\n    end\n  end\nend\n\nup_clock_mon #(\n  .TOTAL_WIDTH(21)\n) i_clock_mon (\n  .up_rstn(~up_reset),\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[361, "always @(posedge up_clk) begin\n"], [362, "  if (up_reset == 1'b1) begin\n"], [363, "    up_scratch <= 'h00;\n"], [364, "    up_irq_enable <= {NUM_IRQS{1'b0}};\n"], [365, "    up_reset_core <= 1'b1;\n"], [367, "    up_cfg_octets_per_frame <= 'h00;\n"], [368, "    up_cfg_octets_per_multiframe <= {DATA_PATH_WIDTH_LOG2{1'b1}};\n"], [369, "    up_cfg_lanes_disable <= {NUM_LANES{1'b0}};\n"], [370, "    up_cfg_links_disable <= {NUM_LINKS{1'b0}};\n"], [371, "    up_cfg_beats_per_multiframe <= 'h00;\n"], [373, "    up_cfg_disable_char_replacement <= 1'b0;\n"], [374, "    up_cfg_disable_scrambler <= 1'b0;\n"], [375, "  end else if (up_wreq == 1'b1) begin\n"], [376, "    case (up_waddr)\n"], [377, "    /* Standard registers */\n"], [378, "    12'h002: up_scratch <= up_wdata;\n"], [380, "    /* IRQ block */\n"], [381, "    12'h020: up_irq_enable <= up_wdata[NUM_IRQS-1:0];\n"], [383, "    /* JESD common control */\n"], [384, "    12'h030: up_reset_core <= up_wdata[0];\n"], [388, "    /*\n"], [389, "     * The configuration needs to be static while the core is\n"], [390, "     * active. To enforce this writes to configuration registers\n"], [391, "     * will be ignored while the core is out of reset.\n"], [392, "     */\n"], [393, "    if (up_cfg_is_writeable == 1'b1) begin\n"], [395, "      12'h080: begin\n"], [396, "        up_cfg_lanes_disable <= up_wdata[NUM_LANES-1:0];\n"], [397, "      end\n"], [398, "      12'h084: begin\n"], [399, "        up_cfg_octets_per_frame <= up_wdata[23:16];\n"], [400, "        up_cfg_octets_per_multiframe <= {up_wdata[9:DATA_PATH_WIDTH_LOG2],\n"], [401, "                                        {DATA_PATH_WIDTH_LOG2{1'b1}}};\n"], [402, "      end\n"], [403, "      12'h085: begin\n"], [404, "        up_cfg_disable_char_replacement <= up_wdata[1];\n"], [405, "        up_cfg_disable_scrambler <= up_wdata[0];\n"], [406, "      end\n"], [407, "      12'h086: begin\n"], [408, "        up_cfg_links_disable <= up_wdata[NUM_LINKS-1:0];\n"], [409, "      end\n"], [410, "      12'h087: begin\n"], [411, "        up_cfg_beats_per_multiframe <= up_wdata[7:0];\n"], [412, "      end\n"], [416, "end\n"]], "Add": [[365, "    /* Count IRQ events for max 8 interrupt sources */\n"], [371, "    for (i = 0; i < NUM_IRQS; i=i+1) begin : irq_cnt\n"], [378, "      reg [15:0] up_irq_event_cnt = 'h0;\n"], [381, "      always @(posedge up_clk) begin\n"], [381, "        if (up_stat_clear) begin\n"], [381, "          up_irq_event_cnt <= 'h0;\n"], [381, "        end else if (up_irq_trigger[i]) begin\n"], [381, "          up_irq_event_cnt <= up_irq_event_cnt + 16'd1;\n"], [381, "        end\n"], [381, "      end\n"], [384, "      assign up_irq_event_cnt_bus[i*16 +: 16] = up_irq_event_cnt;\n"], [384, "    end\n"], [384, "  end else begin : g_no_link_stats\n"], [384, "    assign up_irq_event_cnt_bus = 'h0;\n"], [384, "    assign up_link_enable_cnt_s = 'h0;\n"], [384, "  end\n"], [384, "  endgenerate\n"], [384, "  wire [20:0] clk_mon_count;\n"], [384, "  wire [20:0] device_clk_mon_count;\n"], [384, "  always @(*) begin\n"], [384, "    case (up_raddr)\n"], [384, "      /* Standard registers */\n"], [384, "      12'h000: up_rdata = PCORE_VERSION;\n"], [384, "      12'h001: up_rdata = ID;\n"], [384, "      12'h002: up_rdata = up_scratch;\n"], [384, "      12'h003: up_rdata = PCORE_MAGIC;\n"], [384, "      /* Core configuration */\n"], [384, "      12'h004: up_rdata = status_synth_params0;\n"], [384, "      12'h005: up_rdata = status_synth_params1;\n"], [384, "      12'h006: up_rdata = status_synth_params2;\n"], [384, "      /* 0x07-0x0f reserved for future use */\n"], [384, "      /* 0x10-0x1f reserved for core specific HDL configuration information */\n"], [384, "      /* IRQ block */\n"], [384, "      12'h020: up_rdata = up_irq_enable;\n"], [384, "      12'h021: up_rdata = up_irq_pending;\n"], [384, "      12'h022: up_rdata = up_irq_source;\n"], [384, "      /* 0x23-0x30 reserved for future use */\n"], [384, "      /* JESD common control */\n"], [384, "      12'h030: up_rdata = up_reset_core;\n"], [384, "      12'h031: up_rdata = {up_core_reset_ext, up_reset_synchronizer}; /* core ready */\n"], [384, "      12'h032: up_rdata = {11'h00, clk_mon_count}; /* Make it 16.16 */\n"], [384, "      12'h033: up_rdata = {11'h00, device_clk_mon_count}; /* Make it 16.16 */\n"], [384, "      /* 0x34-0x34 reserver for future use */\n"], [384, "      12'h080: up_rdata = up_cfg_lanes_disable;\n"], [384, "      /* 0x82-0x83 reserved for future lane disable bits (max 128 lanes) */\n"], [384, "      12'h084: up_rdata = {\n"], [384, "        /* 24-31 */ 8'h00, /* Reserved for future extensions of octets_per_frame */\n"], [384, "        /* 16-23 */ up_cfg_octets_per_frame,\n"], [384, "        /* 10-15 */ 6'b000000, /* Reserved for future extensions of beats_per_multiframe */\n"], [384, "        /* 00-09 */ up_cfg_octets_per_multiframe\n"], [384, "      };\n"], [384, "      12'h85: up_rdata = {\n"], [384, "        /* 02-31 */ 30'h00, /* Reserved for future additions */\n"], [384, "        /*    01 */ up_cfg_disable_char_replacement, /* Disable character replacement */\n"], [384, "        /*    00 */ up_cfg_disable_scrambler /* Disable scrambler */\n"], [384, "      };\n"], [384, "      12'h086: up_rdata = up_cfg_links_disable;\n"], [384, "      12'h087: up_rdata = up_cfg_beats_per_multiframe;\n"], [384, "      /* 0x88-0x8f reserved for future use */\n"], [384, "      /* 0x90-0x9f reserved for core specific configuration options */\n"], [384, "      /* 0xb0 Stat control */\n"], [384, "      12'h0b1: up_rdata = up_link_enable_cnt_s;\n"], [384, "      /* 0xb4-0xb7 IRQ Stat, max 8 interrupt sources */\n"], [384, "      12'h0b4: up_rdata = up_irq_event_cnt_bus[0*32 +: 32];\n"], [384, "      12'h0b5: up_rdata = up_irq_event_cnt_bus[1*32 +: 32];\n"], [384, "      12'h0b6: up_rdata = up_irq_event_cnt_bus[2*32 +: 32];\n"], [384, "      12'h0b7: up_rdata = up_irq_event_cnt_bus[3*32 +: 32];\n"], [384, "      default: up_rdata = 'h00;\n"], [386, "  end\n"], [386, "  /* IRQ pending register is write-1-to-clear */\n"], [386, "  always @(*) begin\n"], [386, "    if (up_wreq == 1'b1 && up_waddr == 12'h21) begin\n"], [386, "      up_irq_clear = up_wdata[NUM_IRQS-1:0];\n"], [386, "    end else begin\n"], [386, "      up_irq_clear = {NUM_IRQS{1'b0}};\n"], [386, "    end\n"], [386, "  end\n"], [393, "  always @(posedge up_clk) begin\n"], [393, "    if (up_reset == 1'b1) begin\n"], [393, "      up_scratch <= 'h00;\n"], [393, "      up_irq_enable <= {NUM_IRQS{1'b0}};\n"], [393, "      up_reset_core <= 1'b1;\n"], [393, "      up_cfg_octets_per_frame <= 'h00;\n"], [393, "      up_cfg_octets_per_multiframe <= {DATA_PATH_WIDTH_LOG2{1'b1}};\n"], [393, "      up_cfg_lanes_disable <= {NUM_LANES{1'b0}};\n"], [393, "      up_cfg_links_disable <= {NUM_LINKS{1'b0}};\n"], [393, "      up_cfg_beats_per_multiframe <= 'h00;\n"], [393, "      up_cfg_disable_char_replacement <= 1'b0;\n"], [393, "      up_cfg_disable_scrambler <= 1'b0;\n"], [393, "    end else if (up_wreq == 1'b1) begin\n"], [412, "        /* Standard registers */\n"], [412, "        12'h002: up_scratch <= up_wdata;\n"], [412, "        /* IRQ block */\n"], [412, "        12'h020: up_irq_enable <= up_wdata[NUM_IRQS-1:0];\n"], [412, "        /* JESD common control */\n"], [412, "        12'h030: up_reset_core <= up_wdata[0];\n"], [413, "      /*\n"], [413, "       * The configuration needs to be static while the core is\n"], [413, "       * active. To enforce this writes to configuration registers\n"], [413, "       * will be ignored while the core is out of reset.\n"], [413, "       */\n"], [413, "      if (up_cfg_is_writeable == 1'b1) begin\n"], [413, "        case (up_waddr)\n"], [413, "          12'h080: begin\n"], [413, "            up_cfg_lanes_disable <= up_wdata[NUM_LANES-1:0];\n"], [413, "          end\n"], [413, "          12'h084: begin\n"], [413, "            up_cfg_octets_per_frame <= up_wdata[23:16];\n"], [413, "            up_cfg_octets_per_multiframe <= {up_wdata[9:DATA_PATH_WIDTH_LOG2],\n"], [413, "                                            {DATA_PATH_WIDTH_LOG2{1'b1}}};\n"], [413, "          end\n"], [413, "          12'h085: begin\n"], [413, "            up_cfg_disable_char_replacement <= up_wdata[1];\n"], [413, "            up_cfg_disable_scrambler <= up_wdata[0];\n"], [413, "          end\n"], [413, "          12'h086: begin\n"], [413, "            up_cfg_links_disable <= up_wdata[NUM_LINKS-1:0];\n"], [413, "          end\n"], [413, "          12'h087: begin\n"], [413, "            up_cfg_beats_per_multiframe <= up_wdata[7:0];\n"], [413, "          end\n"], [413, "        endcase\n"], [413, "      end\n"]]}}