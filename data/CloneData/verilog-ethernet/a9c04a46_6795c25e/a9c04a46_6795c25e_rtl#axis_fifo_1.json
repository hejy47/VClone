{"Source Block": ["verilog-ethernet/rtl/axis_fifo.v@199:253@HdlStmProcess", "assign status_overflow = overflow_reg;\nassign status_bad_frame = bad_frame_reg;\nassign status_good_frame = good_frame_reg;\n\n// Write logic\nalways @* begin\n    write = 1'b0;\n\n    drop_frame_next = 1'b0;\n    overflow_next = 1'b0;\n    bad_frame_next = 1'b0;\n    good_frame_next = 1'b0;\n\n    wr_ptr_next = wr_ptr_reg;\n    wr_ptr_cur_next = wr_ptr_cur_reg;\n\n    if (s_axis_tready && s_axis_tvalid) begin\n        // transfer in\n        if (!FRAME_FIFO) begin\n            // normal FIFO mode\n            write = 1'b1;\n            wr_ptr_next = wr_ptr_reg + 1;\n        end else if (full_cur || full_wr || drop_frame_reg) begin\n            // full, packet overflow, or currently dropping frame\n            // drop frame\n            drop_frame_next = 1'b1;\n            if (s_axis_tlast) begin\n                // end of frame, reset write pointer\n                wr_ptr_cur_next = wr_ptr_reg;\n                drop_frame_next = 1'b0;\n                overflow_next = 1'b1;\n            end\n        end else begin\n            write = 1'b1;\n            wr_ptr_cur_next = wr_ptr_cur_reg + 1;\n            if (s_axis_tlast) begin\n                // end of frame\n                if (DROP_BAD_FRAME && USER_BAD_FRAME_MASK & ~(s_axis_tuser ^ USER_BAD_FRAME_VALUE)) begin\n                    // bad packet, reset write pointer\n                    wr_ptr_cur_next = wr_ptr_reg;\n                    bad_frame_next = 1'b1;\n                end else begin\n                    // good packet, update write pointer\n                    wr_ptr_next = wr_ptr_cur_reg + 1;\n                    good_frame_next = 1'b1;\n                end\n            end\n        end\n    end\nend\n\nalways @(posedge clk) begin\n    if (rst) begin\n        wr_ptr_reg <= {ADDR_WIDTH+1{1'b0}};\n        wr_ptr_cur_reg <= {ADDR_WIDTH+1{1'b0}};\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[207, "    drop_frame_next = 1'b0;\n"]], "Add": [[207, "    drop_frame_next = drop_frame_reg;\n"]]}}