{"Source Block": ["verilog-ethernet/rtl/eth_mac_1g_rx.v@109:188@HdlStmProcess", "    .data_in(gmii_rxd_d4),\n    .crc_state(crc_state),\n    .crc_next(crc_next)\n);\n\nalways @* begin\n    state_next = STATE_IDLE;\n\n    reset_crc = 0;\n    update_crc = 0;\n\n    output_axis_tdata_next = 0;\n    output_axis_tvalid_next = 0;\n    output_axis_tlast_next = 0;\n    output_axis_tuser_next = 0;\n\n    error_bad_frame_next = 0;\n    error_bad_fcs_next = 0;\n\n    case (state_reg)\n        STATE_IDLE: begin\n            // idle state - wait for packet\n            reset_crc = 1;\n\n            if (gmii_rx_dv_d4 && ~gmii_rx_er_d4 && gmii_rxd_d4 == 8'hD5) begin\n                state_next = STATE_PAYLOAD;\n            end else begin\n                state_next = STATE_IDLE;\n            end\n        end\n        STATE_PAYLOAD: begin\n            // read payload\n            update_crc = 1;\n\n            output_axis_tdata_next = gmii_rxd_d4;\n            output_axis_tvalid_next = 1;\n\n            if (gmii_rx_dv_d4 & gmii_rx_er_d4) begin\n                // error\n                output_axis_tlast_next = 1;\n                output_axis_tuser_next = 1;\n                error_bad_frame_next = 1;\n                state_next = STATE_WAIT_LAST;\n            end else if (~gmii_rx_dv) begin\n                // end of packet\n                output_axis_tlast_next = 1;\n                if (gmii_rx_er_d0 | gmii_rx_er_d1 | gmii_rx_er_d2 | gmii_rx_er_d3) begin\n                    // error received in FCS bytes\n                    output_axis_tuser_next = 1;\n                    error_bad_frame_next = 1;\n                end else if ({gmii_rxd_d0, gmii_rxd_d1, gmii_rxd_d2, gmii_rxd_d3} == ~crc_next) begin\n                    // FCS good\n                    output_axis_tuser_next = 0;\n                end else begin\n                    // FCS bad\n                    output_axis_tuser_next = 1;\n                    error_bad_frame_next = 1;\n                    error_bad_fcs_next = 1;\n                end\n                state_next = STATE_IDLE;\n            end else begin\n                state_next = STATE_PAYLOAD;\n            end\n        end\n        STATE_WAIT_LAST: begin\n            // wait for end of packet\n\n            if (~gmii_rx_dv) begin\n                state_next = STATE_IDLE;\n            end else begin\n                state_next = STATE_WAIT_LAST;\n            end\n        end\n    endcase\nend\n\nalways @(posedge clk) begin\n    if (rst) begin\n        state_reg <= STATE_IDLE;\n\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[117, "    reset_crc = 0;\n"], [118, "    update_crc = 0;\n"], [120, "    output_axis_tdata_next = 0;\n"], [121, "    output_axis_tvalid_next = 0;\n"], [122, "    output_axis_tlast_next = 0;\n"], [123, "    output_axis_tuser_next = 0;\n"], [125, "    error_bad_frame_next = 0;\n"], [126, "    error_bad_fcs_next = 0;\n"], [131, "            reset_crc = 1;\n"], [141, "            update_crc = 1;\n"], [144, "            output_axis_tvalid_next = 1;\n"], [148, "                output_axis_tlast_next = 1;\n"], [149, "                output_axis_tuser_next = 1;\n"], [150, "                error_bad_frame_next = 1;\n"], [154, "                output_axis_tlast_next = 1;\n"], [157, "                    output_axis_tuser_next = 1;\n"], [158, "                    error_bad_frame_next = 1;\n"], [161, "                    output_axis_tuser_next = 0;\n"], [164, "                    output_axis_tuser_next = 1;\n"], [165, "                    error_bad_frame_next = 1;\n"], [166, "                    error_bad_fcs_next = 1;\n"]], "Add": [[118, "    reset_crc = 1'b0;\n"], [118, "    update_crc = 1'b0;\n"], [123, "    output_axis_tdata_next = 8'd0;\n"], [123, "    output_axis_tvalid_next = 1'b0;\n"], [123, "    output_axis_tlast_next = 1'b0;\n"], [123, "    output_axis_tuser_next = 1'b0;\n"], [126, "    error_bad_frame_next = 1'b0;\n"], [126, "    error_bad_fcs_next = 1'b0;\n"], [131, "            reset_crc = 1'b1;\n"], [141, "            update_crc = 1'b1;\n"], [144, "            output_axis_tvalid_next = 1'b1;\n"], [150, "                output_axis_tlast_next = 1'b1;\n"], [150, "                output_axis_tuser_next = 1'b1;\n"], [150, "                error_bad_frame_next = 1'b1;\n"], [154, "                output_axis_tlast_next = 1'b1;\n"], [158, "                    output_axis_tuser_next = 1'b1;\n"], [158, "                    error_bad_frame_next = 1'b1;\n"], [161, "                    output_axis_tuser_next = 1'b0;\n"], [166, "                    output_axis_tuser_next = 1'b1;\n"], [166, "                    error_bad_frame_next = 1'b1;\n"], [166, "                    error_bad_fcs_next = 1'b1;\n"]]}}