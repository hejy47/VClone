{"Source Block": ["verilog-ethernet/rtl/ptp_clock_cdc.v@338:388@HdlStmProcess", "end\n\nreg [SAMPLE_ACC_WIDTH-1:0] sample_acc_sync_reg = 0;\nreg sample_acc_sync_valid_reg = 0;\n\nalways @(posedge output_clk) begin\n    if (USE_SAMPLE_CLOCK) begin\n        // latch in synchronized counts from phase detector\n        sample_acc_sync_valid_reg <= 1'b0;\n        if (sample_update_sync2_reg ^ sample_update_sync3_reg) begin\n            sample_acc_sync_reg <= sample_acc_out_reg;\n            sample_acc_sync_valid_reg <= 1'b1;\n        end\n    end else begin\n        // phase and frequency detector\n        if (dest_sync_sync2_reg && !dest_sync_sync3_reg) begin\n            if (src_sync_sync2_reg && !src_sync_sync3_reg) begin\n                edge_1_reg <= 1'b0;\n                edge_2_reg <= 1'b0;\n                active_reg[0] <= 1'b1;\n            end else begin\n                edge_1_reg <= !edge_2_reg;\n                edge_2_reg <= 1'b0;\n            end\n        end else if (src_sync_sync2_reg && !src_sync_sync3_reg) begin\n            edge_1_reg <= 1'b0;\n            edge_2_reg <= !edge_1_reg;\n            active_reg[0] <= 1'b1;\n        end\n\n        // accumulator\n        sample_acc_reg <= $signed(sample_acc_reg) + $signed({1'b0, edge_2_reg}) - $signed({1'b0, edge_1_reg});\n\n        sample_cnt_reg <= sample_cnt_reg + 1;\n\n        sample_acc_sync_valid_reg <= 1'b0;\n        if (sample_cnt_reg == 0) begin\n            active_reg <= active_reg << 1;\n            sample_acc_reg <= $signed({1'b0, edge_2_reg}) - $signed({1'b0, edge_1_reg});\n            sample_acc_sync_reg <= sample_acc_reg;\n            if (active_reg != 0) begin\n                sample_acc_sync_valid_reg <= 1'b1;\n            end\n        end\n    end\nend\n\nreg [PHASE_ACC_WIDTH-1:0] dest_err_int_reg = 0, dest_err_int_next = 0;\nreg [1:0] dest_ovf;\n\nreg [DEST_SYNC_LOCK_WIDTH-1:0] dest_sync_lock_count_reg = 0, dest_sync_lock_count_next;\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[357, "                active_reg[0] <= 1'b1;\n"], [365, "            active_reg[0] <= 1'b1;\n"], [375, "            active_reg <= active_reg << 1;\n"]], "Add": [[371, "        if (src_sync_sync2_reg && !src_sync_sync3_reg) begin\n"], [371, "            active_reg[0] <= 1'b1;\n"], [371, "        end\n"], [375, "            active_reg <= {active_reg, src_sync_sync2_reg && !src_sync_sync3_reg};\n"]]}}