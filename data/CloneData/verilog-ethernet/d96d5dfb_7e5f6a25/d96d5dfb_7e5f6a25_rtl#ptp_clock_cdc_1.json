{"Source Block": ["verilog-ethernet/rtl/ptp_clock_cdc.v@295:337@HdlStmProcess", "reg edge_1_reg = 1'b0;\nreg edge_2_reg = 1'b0;\n\nreg [3:0] active_reg = 0;\n\nalways @(posedge sample_clk) begin\n    if (USE_SAMPLE_CLOCK) begin\n        // phase and frequency detector\n        if (dest_sync_sample_sync2_reg && !dest_sync_sample_sync3_reg) begin\n            if (src_sync_sample_sync2_reg && !src_sync_sample_sync3_reg) begin\n                edge_1_reg <= 1'b0;\n                edge_2_reg <= 1'b0;\n                active_reg[0] <= 1'b1;\n            end else begin\n                edge_1_reg <= !edge_2_reg;\n                edge_2_reg <= 1'b0;\n            end\n        end else if (src_sync_sample_sync2_reg && !src_sync_sample_sync3_reg) begin\n            edge_1_reg <= 1'b0;\n            edge_2_reg <= !edge_1_reg;\n            active_reg[0] <= 1'b1;\n        end\n\n        // accumulator\n        sample_acc_reg <= $signed(sample_acc_reg) + $signed({1'b0, edge_2_reg}) - $signed({1'b0, edge_1_reg});\n\n        sample_cnt_reg <= sample_cnt_reg + 1;\n\n        if (sample_cnt_reg == 0) begin\n            active_reg <= active_reg << 1;\n            sample_acc_reg <= $signed({1'b0, edge_2_reg}) - $signed({1'b0, edge_1_reg});\n            sample_acc_out_reg <= sample_acc_reg;\n            if (active_reg != 0) begin\n                sample_update_reg <= !sample_update_reg;\n            end\n        end\n    end\nend\n\nalways @(posedge output_clk) begin\n    sample_update_sync1_reg <= sample_update_reg;\n    sample_update_sync2_reg <= sample_update_sync1_reg;\n    sample_update_sync3_reg <= sample_update_sync2_reg;\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[307, "                active_reg[0] <= 1'b1;\n"], [315, "            active_reg[0] <= 1'b1;\n"], [324, "            active_reg <= active_reg << 1;\n"]], "Add": [[321, "        if (src_sync_sample_sync2_reg && !src_sync_sample_sync3_reg) begin\n"], [321, "            active_reg[0] <= 1'b1;\n"], [321, "        end\n"], [324, "            active_reg <= {active_reg, src_sync_sample_sync2_reg && !src_sync_sample_sync3_reg};\n"]]}}