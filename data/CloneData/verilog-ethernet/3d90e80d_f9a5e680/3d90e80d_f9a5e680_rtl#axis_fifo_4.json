{"Source Block": ["verilog-ethernet/rtl/axis_fifo.v@171:228@HdlStmProcess", "assign status_overflow = overflow_reg;\nassign status_bad_frame = bad_frame_reg;\nassign status_good_frame = good_frame_reg;\n\n// Write logic\nalways @* begin\n    write = 1'b0;\n\n    drop_frame_next = 1'b0;\n    overflow_next = 1'b0;\n    bad_frame_next = 1'b0;\n    good_frame_next = 1'b0;\n\n    wr_ptr_next = wr_ptr_reg;\n    wr_ptr_cur_next = wr_ptr_cur_reg;\n\n    if (s_axis_tvalid) begin\n        // input data valid\n        if (!full || DROP_WHEN_FULL) begin\n            // not full, perform write\n            if (!FRAME_FIFO) begin\n                // normal FIFO mode\n                write = 1'b1;\n                wr_ptr_next = wr_ptr_reg + 1;\n            end else if (full || full_cur || drop_frame_reg) begin\n                // full, packet overflow, or currently dropping frame\n                // drop frame\n                drop_frame_next = 1'b1;\n                if (s_axis_tlast) begin\n                    // end of frame, reset write pointer\n                    wr_ptr_cur_next = wr_ptr_reg;\n                    drop_frame_next = 1'b0;\n                    overflow_next = 1'b1;\n                end\n            end else begin\n                write = 1'b1;\n                wr_ptr_cur_next = wr_ptr_cur_reg + 1;\n                if (s_axis_tlast) begin\n                    // end of frame\n                    if (DROP_BAD_FRAME && (USER_BAD_FRAME_MASK & s_axis_tuser == USER_BAD_FRAME_VALUE)) begin\n                        // bad packet, reset write pointer\n                        wr_ptr_cur_next = wr_ptr_reg;\n                        bad_frame_next = 1'b1;\n                    end else begin\n                        // good packet, update write pointer\n                        wr_ptr_next = wr_ptr_cur_reg + 1;\n                        good_frame_next = 1'b1;\n                    end\n                end\n            end\n        end\n    end\nend\n\nalways @(posedge clk) begin\n    if (rst) begin\n        wr_ptr_reg <= {ADDR_WIDTH+1{1'b0}};\n        wr_ptr_cur_reg <= {ADDR_WIDTH+1{1'b0}};\n"], "Clone Blocks": [["verilog-ethernet/rtl/axis_async_fifo.v@236:296", "        m_rst_sync3_reg <= m_rst_sync2_reg;\n    end\nend\n\n// Write logic\nalways @* begin\n    write = 1'b0;\n\n    drop_frame_next = 1'b0;\n    overflow_next = 1'b0;\n    bad_frame_next = 1'b0;\n    good_frame_next = 1'b0;\n\n    wr_ptr_next = wr_ptr_reg;\n    wr_ptr_cur_next = wr_ptr_cur_reg;\n    wr_ptr_gray_next = wr_ptr_gray_reg;\n\n    if (s_axis_tvalid) begin\n        // input data valid\n        if (!full || DROP_WHEN_FULL) begin\n            // not full, perform write\n            if (!FRAME_FIFO) begin\n                // normal FIFO mode\n                write = 1'b1;\n                wr_ptr_next = wr_ptr_reg + 1;\n                wr_ptr_gray_next = wr_ptr_next ^ (wr_ptr_next >> 1);\n            end else if (full || full_cur || drop_frame_reg) begin\n                // full, packet overflow, or currently dropping frame\n                // drop frame\n                drop_frame_next = 1'b1;\n                if (s_axis_tlast) begin\n                    // end of frame, reset write pointer\n                    wr_ptr_cur_next = wr_ptr_reg;\n                    drop_frame_next = 1'b0;\n                    overflow_next = 1'b1;\n                end\n            end else begin\n                write = 1'b1;\n                wr_ptr_cur_next = wr_ptr_cur_reg + 1;\n                if (s_axis_tlast) begin\n                    // end of frame\n                    if (DROP_BAD_FRAME && (USER_BAD_FRAME_MASK & s_axis_tuser == USER_BAD_FRAME_VALUE)) begin\n                        // bad packet, reset write pointer\n                        wr_ptr_cur_next = wr_ptr_reg;\n                        bad_frame_next = 1'b1;\n                    end else begin\n                        // good packet, update write pointer\n                        wr_ptr_next = wr_ptr_cur_reg + 1;\n                        wr_ptr_gray_next = wr_ptr_next ^ (wr_ptr_next >> 1);\n                        good_frame_next = 1'b1;\n                    end\n                end\n            end\n        end\n    end\nend\n\nalways @(posedge s_clk) begin\n    if (s_rst_sync3_reg) begin\n        wr_ptr_reg <= {ADDR_WIDTH+1{1'b0}};\n        wr_ptr_cur_reg <= {ADDR_WIDTH+1{1'b0}};\n"]], "Diff Content": {"Delete": [[187, "    if (s_axis_tvalid) begin\n"], [189, "        if (!full || DROP_WHEN_FULL) begin\n"], [191, "            if (!FRAME_FIFO) begin\n"], [193, "                write = 1'b1;\n"], [194, "                wr_ptr_next = wr_ptr_reg + 1;\n"], [195, "            end else if (full || full_cur || drop_frame_reg) begin\n"], [198, "                drop_frame_next = 1'b1;\n"], [199, "                if (s_axis_tlast) begin\n"], [202, "                    drop_frame_next = 1'b0;\n"], [203, "                    overflow_next = 1'b1;\n"], [204, "                end\n"], [205, "            end else begin\n"], [206, "                write = 1'b1;\n"], [207, "                wr_ptr_cur_next = wr_ptr_cur_reg + 1;\n"], [208, "                if (s_axis_tlast) begin\n"], [210, "                    if (DROP_BAD_FRAME && (USER_BAD_FRAME_MASK & s_axis_tuser == USER_BAD_FRAME_VALUE)) begin\n"], [212, "                        wr_ptr_cur_next = wr_ptr_reg;\n"], [213, "                        bad_frame_next = 1'b1;\n"], [214, "                    end else begin\n"], [216, "                        wr_ptr_next = wr_ptr_cur_reg + 1;\n"], [217, "                        good_frame_next = 1'b1;\n"], [218, "                    end\n"]], "Add": [[199, "    if (s_axis_tready && s_axis_tvalid) begin\n"], [199, "        if (!FRAME_FIFO) begin\n"], [199, "            write = 1'b1;\n"], [199, "            wr_ptr_next = wr_ptr_reg + 1;\n"], [199, "        end else if (full_cur || full_wr || drop_frame_reg) begin\n"], [199, "            drop_frame_next = 1'b1;\n"], [199, "            if (s_axis_tlast) begin\n"], [199, "                wr_ptr_cur_next = wr_ptr_reg;\n"], [199, "                drop_frame_next = 1'b0;\n"], [199, "                overflow_next = 1'b1;\n"], [199, "            end\n"], [199, "        end else begin\n"], [199, "            write = 1'b1;\n"], [199, "            wr_ptr_cur_next = wr_ptr_cur_reg + 1;\n"], [199, "            if (s_axis_tlast) begin\n"], [199, "                if (DROP_BAD_FRAME && (USER_BAD_FRAME_MASK & s_axis_tuser == USER_BAD_FRAME_VALUE)) begin\n"], [218, "                    bad_frame_next = 1'b1;\n"], [218, "                end else begin\n"], [218, "                    wr_ptr_next = wr_ptr_cur_reg + 1;\n"], [218, "                    good_frame_next = 1'b1;\n"]]}}