{"Source Block": ["zipcpu/rtl/peripherals/zipmmu.v@457:515@HdlStmProcess", "\tassign\tr_vpage = (r_addr[(DW-3):(DW-2-VAW)]);\n\n\tinitial\ts_pending = 1'b0;\n\tinitial\tr_pending = 1'b0;\n\tinitial\tr_valid   = 1'b0;\n\talways @(posedge i_clk)\n\tif (i_reset)\n\tbegin\n\t\tr_pending <= 1'b0;\n\t\tr_valid   <= 1'b0;\n\t\to_addr    <= 0;\n\t\tr_we      <= 0;\n\t\tr_addr    <= 0;\n\t\tr_data    <= 0;\n\t\tr_sel     <= 0;\n\t\t//\n\t\ts_pending <= 1'b0;\n\tend else\n\tbegin\n\t\tif (!o_rtn_stall)\n\t\tbegin\n\t\t\tr_pending <= (i_wbm_stb)&&(!kernel_context);\n\t\t\tr_we      <= i_wbm_we;\n\t\t\to_addr    <= { { (kernel_context)?\n\t\t\t\ti_wbm_addr[(AW-1):LGPGSZW] : last_ppage },\n\t\t\t\ti_wbm_addr[(LGPGSZW-1):0] };\n\t\t\tr_addr    <= i_wbm_addr;\n\t\t\tr_data    <= i_wbm_data;\n\t\t\tr_sel     <= i_wbm_sel;\n\t\t\tr_valid   <= (i_wbm_stb)&&(\n\t\t\t\t(kernel_context)\n\t\t\t\t||((last_page_valid)\n\t\t\t\t\t&&(i_wbm_addr[(DW-3):(DW-2-VAW)] == last_vpage)\n\t\t\t\t\t&&((!last_ro)||(!i_wbm_we))));\n\t\t\ts_pending <= 1'b0;\n\t\tend else if (!r_valid) begin\n\t\t\tr_valid <= (!miss_pending)&&((last_page_valid)\n\t\t\t\t\t&&(r_vpage== last_vpage)\n\t\t\t\t\t&&((!last_ro)||(!r_we)));\n\t\t\to_addr <= { last_ppage , r_addr[(LGPGSZW-1):0] };\n\t\t\tr_pending<= (r_pending);\n\t\t\ts_pending <=(r_pending)&&(!kernel_context);\n\t\tend else begin\n\t\t\tr_pending <= 1'b0;\n\t\t\ts_pending <= 1'b0;\n\t\tend\n\n\t\tif ((!i_wbm_cyc)||(o_rtn_err)||((o_cyc)&&(i_err)))\n\t\tbegin\n\t\t\ts_pending <= 1'b0;\n\t\t\tr_pending <= 1'b0;\n\t\t\tr_valid   <= 1'b0;\n\t\tend\n\tend\n\n`ifdef\tFORMAL\n\talways @(posedge i_clk)\n\tif ((f_past_valid)&&($past(r_pending))&&(r_pending)&&($past(o_rtn_stall))&&(i_wbm_cyc)&&(!o_stb))\n\t\tassert(s_pending);\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[478, "\t\t\tr_pending <= (i_wbm_stb)&&(!kernel_context);\n"], [486, "\t\t\tr_valid   <= (i_wbm_stb)&&(\n"], [487, "\t\t\t\t(kernel_context)\n"], [488, "\t\t\t\t||((last_page_valid)\n"], [489, "\t\t\t\t\t&&(i_wbm_addr[(DW-3):(DW-2-VAW)] == last_vpage)\n"], [490, "\t\t\t\t\t&&((!last_ro)||(!i_wbm_we))));\n"], [493, "\t\t\tr_valid <= (!miss_pending)&&((last_page_valid)\n"], [494, "\t\t\t\t\t&&(r_vpage== last_vpage)\n"], [495, "\t\t\t\t\t&&((!last_ro)||(!r_we)));\n"], [496, "\t\t\to_addr <= { last_ppage , r_addr[(LGPGSZW-1):0] };\n"], [497, "\t\t\tr_pending<= (r_pending);\n"], [498, "\t\t\ts_pending <=(r_pending)&&(!kernel_context);\n"]], "Add": [[468, "\t\tr_exe     <= 0;\n"], [478, "\t\t\tr_pending <= (i_wbm_stb)&&(!kernel_context)\n"], [478, "\t\t\t\t\t\t&&(!this_page_valid);\n"], [479, "\t\t\tr_exe     <= i_wbm_exe;\n"], [490, "\t\t\tr_valid   <= (i_wbm_stb)&&((kernel_context)||(this_page_valid));\n"], [498, "\t\t\tr_valid <= (pending_page_valid);\n"], [498, "\t\t\to_addr <= { ppage , r_addr[(LGPGSZW-1):0] };\n"], [498, "\t\t\tr_pending<= (r_pending)&&(!pending_page_valid);\n"], [498, "\t\t\ts_pending <=(r_pending)&&(!pending_page_valid);\n"]]}}