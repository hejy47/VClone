{"Source Block": ["zipcpu/rtl/core/memops.v@255:295@HdlStmIf", "\tend\n\n\treg\tlock_gbl, lock_lcl;\n\n\tgenerate\n\tif (IMPLEMENT_LOCK != 0)\n\tbegin\n\n\t\tinitial\tlock_gbl = 1'b0;\n\t\tinitial\tlock_lcl = 1'b0;\n\n\t\talways @(posedge i_clk)\n\t\tif (i_reset)\n\t\tbegin\n\t\t\tlock_gbl <= 1'b0;\n\t\t\tlock_lcl <= 1'b0;\n\t\tend else if (((i_wb_err)&&((r_wb_cyc_gbl)||(r_wb_cyc_lcl)))\n\t\t\t\t||((i_stb)&&(misaligned)))\n\t\tbegin\n\t\t\tlock_gbl <= 1'b0;\n\t\t\tlock_lcl <= 1'b0;\n\t\tend else begin\n\t\t\tlock_gbl <= (i_lock)&&((r_wb_cyc_gbl)||(lock_gbl));\n\t\t\tlock_lcl <= (i_lock)&&((r_wb_cyc_lcl)||(lock_lcl));\n\t\tend\n\n\t\tassign\to_wb_cyc_gbl = (r_wb_cyc_gbl)||(lock_gbl);\n\t\tassign\to_wb_cyc_lcl = (r_wb_cyc_lcl)||(lock_lcl);\n\tend else begin\n\n\t\tassign\to_wb_cyc_gbl = (r_wb_cyc_gbl);\n\t\tassign\to_wb_cyc_lcl = (r_wb_cyc_lcl);\n\n\t\talways @(*)\n\t\t\t{ lock_gbl, lock_lcl } = 2'b00;\n\tend endgenerate\n\n\n\t// Make verilator happy\n\t// verilator lint_off UNUSED\n\twire\tunused;\n"], "Clone Blocks": [["zipcpu/rtl/core/pipemem.v@277:309", "\n\tassign\to_pipe_stalled = ((cyc)&&(fifo_full))||((cyc)\n\t\t\t&&((i_wb_stall)||((!o_wb_stb_lcl)&&(!o_wb_stb_gbl))));\n\n\tgenerate\n\tif (IMPLEMENT_LOCK != 0)\n\tbegin\n\t\treg\tlock_gbl, lock_lcl;\n\n\t\tinitial\tlock_gbl = 1'b0;\n\t\tinitial\tlock_lcl = 1'b0;\n\t\talways @(posedge i_clk)\n\t\tif ((i_reset)||((i_wb_err)&&(cyc))\n\t\t\t||((i_pipe_stb)&&(misaligned)))\n\t\tbegin\n\t\t\tlock_gbl <= 1'b0;\n\t\t\tlock_lcl <= 1'b0;\n\t\tend else begin\n\t\t\tlock_gbl <= (i_lock)&&((r_wb_cyc_gbl)||(lock_gbl));\n\t\t\tlock_lcl <= (i_lock)&&((r_wb_cyc_lcl)||(lock_lcl));\n\t\tend\n\n\t\tassign\to_wb_cyc_gbl = (r_wb_cyc_gbl)||(lock_gbl);\n\t\tassign\to_wb_cyc_lcl = (r_wb_cyc_lcl)||(lock_lcl);\n\tend else begin\n\t\tassign\to_wb_cyc_gbl = (r_wb_cyc_gbl);\n\t\tassign\to_wb_cyc_lcl = (r_wb_cyc_lcl);\n\tend endgenerate\n\n\t// Make verilator happy\n\t// verilator lint_off UNUSED\n\twire\tunused;\n\tassign\tunused = i_lock;\n"]], "Diff Content": {"Delete": [], "Add": [[289, "\t\twire\t[2:0]\tlock_unused;\n"], [289, "\t\tassign\tlock_unused = { i_lock, lock_gbl, lock_lcl };\n"], [290, "`ifdef\tVERILATOR\n"], [290, "\talways @(posedge i_clk)\n"], [290, "\tif ((r_wb_cyc_gbl)||(r_wb_cyc_lcl))\n"], [290, "\t\tassert(!i_stb);\n"], [290, "`endif\n"]]}}