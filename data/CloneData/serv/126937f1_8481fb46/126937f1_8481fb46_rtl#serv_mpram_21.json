{"Source Block": ["serv/rtl/serv_mpram.v@71:107@HdlStmProcess", "//\t\t                    (i_trap ? CSR_MEPC  : i_csr_addr);\n   assign waddr[2:0] = wcnt_hi;\n\n   wire \t     wgo = !(|wcnt_lo) & ((i_run & (i_rd_wen | i_csr_en)) | i_trap);\n\n   always @(posedge i_clk) begin\n      trap_r <= i_trap;\n      trap_2r <= trap_r;\n      trap_3r <= trap_2r;\n\n      if (wgo) begin\n\t wgo_r <= 1'b1;\n\t wen_r <= {(i_run & i_csr_en)|i_trap,(i_rd_wen & i_run)|i_trap};\n\t rd_waddr <= i_rd_waddr;\n      end\n      wdata0 <= {i_trap ? i_mtval : i_rd ,wdata0[4:1]};\n      wdata1 <= {i_trap ? i_mepc  : i_csr,wdata1[5:1]};\n      wcnt_lo <= {wcnt_lo[2:0],wcnt_lo[3] | wgo};\n      if (wcnt_lo[3]) begin\n\t wcnt_hi <= wcnt_hi + 1;\n\t if (wcnt_hi == 3'd7) begin\n\t    wgo_r <= !wgo_r;\n\t    wcnt_lo[0] <= wgo_r;\n\t    wcnt_hi <= wcnt_hi + {2'b00,wgo_r};\n\t end\n      end\n      if (i_rst) begin\n\t wgo_r <= 1'b0;\n\t wcnt_lo <= 4'd0;\n\t wcnt_hi <= 3'd7;\n      end\n   end\n\n   //0 : RS1\n   //1 : RS2\n   //2 : CSR\n   reg [2:0] rcnt_hi;\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[77, "      trap_r <= i_trap;\n"], [78, "      trap_2r <= trap_r;\n"], [79, "      trap_3r <= trap_2r;\n"], [81, "      if (wgo) begin\n"], [82, "\t wgo_r <= 1'b1;\n"], [83, "\t wen_r <= {(i_run & i_csr_en)|i_trap,(i_rd_wen & i_run)|i_trap};\n"], [84, "\t rd_waddr <= i_rd_waddr;\n"], [85, "      end\n"], [86, "      wdata0 <= {i_trap ? i_mtval : i_rd ,wdata0[4:1]};\n"], [87, "      wdata1 <= {i_trap ? i_mepc  : i_csr,wdata1[5:1]};\n"], [88, "      wcnt_lo <= {wcnt_lo[2:0],wcnt_lo[3] | wgo};\n"], [89, "      if (wcnt_lo[3]) begin\n"], [90, "\t wcnt_hi <= wcnt_hi + 1;\n"], [91, "\t if (wcnt_hi == 3'd7) begin\n"], [92, "\t    wgo_r <= !wgo_r;\n"], [93, "\t    wcnt_lo[0] <= wgo_r;\n"], [94, "\t    wcnt_hi <= wcnt_hi + {2'b00,wgo_r};\n"], [95, "\t end\n"], [96, "      end\n"], [98, "\t wgo_r <= 1'b0;\n"], [99, "\t wcnt_lo <= 4'd0;\n"], [100, "\t wcnt_hi <= 3'd7;\n"]], "Add": [[96, "      wreq_r    <= i_wreq | o_rgnt;\n"], [96, "      wdata0_r  <= wdata0;\n"], [96, "      wdata1_r  <= wdata1;\n"], [96, "      wdata1_2r <= wdata1_r;\n"], [96, "      run_r <= i_run;\n"], [96, "      if (wgo)\n"], [96, "\twcnt <= wcnt+5'd1;\n"], [96, "      if (wreq_r)\n"], [96, "\t wgo <= 1'b1;\n"], [96, "      if (wcnt == 5'b11111)\n"], [96, "\twgo <= 1'b0;\n"], [100, "\t wcnt <= 5'd0;\n"], [102, "   /*\n"], [102, "    ********** Read side ***********\n"], [102, "    */\n"]]}}