{"Source Block": ["serv/rtl/serv_rf_if.v@49:121@HdlStmIf", "   /*\n    ********** Write side ***********\n    */\n\n   generate\n   if (WITH_CSR) begin\n   wire \t     rd = (i_ctrl_rd ) |\n\t\t\t  (i_alu_rd & i_rd_alu_en) |\n\t\t\t  (i_csr_rd & i_rd_csr_en) |\n\t\t\t  (i_mem_rd);\n\n   wire \t     mtval = i_mem_misalign ? i_bufreg_q : i_bad_pc;\n\n   assign \t     o_wdata0 = i_trap ? mtval  : rd;\n   assign\t     o_wdata1 = i_trap ? i_mepc : i_csr;\n\n   //port 0 rd mtval\n   //port 1 csr mepc\n   //mepc  100010\n   //mtval 100011\n   //csr   1000xx\n   //rd    0xxxxx\n   assign o_wreg0 = i_trap ? {4'b1000,CSR_MTVAL} : {1'b0,i_rd_waddr};\n   assign o_wreg1 = i_trap ? {4'b1000,CSR_MEPC}  : {4'b1000,i_csr_addr};\n\n   assign       o_wen0 = i_trap | i_rd_wen;\n   assign       o_wen1 = i_trap | i_csr_en;\n\n   /*\n    ********** Read side ***********\n    */\n\n   //0 : RS1\n   //1 : RS2 / CSR\n\n\n   assign o_rreg0 = {1'b0, i_rs1_raddr};\n   assign o_rreg1 =\n\t\t i_trap   ? {4'b1000, CSR_MTVEC} :\n\t\t i_mret   ? {4'b1000, CSR_MEPC} :\n\t\t i_csr_en ? {4'b1000, i_csr_addr} :\n\t\t {1'b0,i_rs2_raddr};\n\n   assign o_rs1 = i_rdata0;\n   assign o_rs2 = i_rdata1;\n   assign o_csr = i_rdata1 & i_csr_en;\n   assign o_csr_pc = i_rdata1;\n\n   end else begin\n      wire \t     rd = (i_ctrl_rd ) |\n\t\t\t  (i_alu_rd & i_rd_alu_en) |\n\t\t\t  (i_mem_rd);\n\n      assign \t     o_wdata0 = rd;\n      assign\t     o_wdata1 = 1'b0;\n\n      assign o_wreg0 = {1'b0,i_rd_waddr};\n\n      assign       o_wen0 =i_rd_wen;\n      assign       o_wen1 = 1'b0;\n\n   /*\n    ********** Read side ***********\n    */\n\n      assign o_rreg0 = {1'b0, i_rs1_raddr};\n      assign o_rreg1 = {1'b0, i_rs2_raddr};\n\n      assign o_rs1 = i_rdata0;\n      assign o_rs2 = i_rdata1;\n   end // else: !if(WITH_CSR)\n   endgenerate\nendmodule\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[105, "      assign o_wreg0 = {1'b0,i_rd_waddr};\n"], [114, "      assign o_rreg0 = {1'b0, i_rs1_raddr};\n"], [115, "      assign o_rreg1 = {1'b0, i_rs2_raddr};\n"]], "Add": [[105, "      assign o_wreg0 = i_rd_waddr;\n"], [105, "      assign o_wreg1 = 5'd0;\n"], [115, "      assign o_rreg0 = i_rs1_raddr;\n"], [115, "      assign o_rreg1 = i_rs2_raddr;\n"]]}}