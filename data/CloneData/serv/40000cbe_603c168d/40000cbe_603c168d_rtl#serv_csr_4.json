{"Source Block": ["serv/rtl/serv_csr.v@57:90@HdlStmProcess", "\n   assign o_csr_in = csr_in;\n\n   reg \t\tmtip_r;\n\n   always @(posedge i_clk) begin\n      if (i_mstatus_en & (i_cnt[4:2] == 3'd0) & i_cnt_r[3])\n\tmstatus_mie <= csr_in;\n\n      if (i_mie_en & (i_cnt[4:2] == 3'd1) & i_cnt_r[3])\n\tmie_mtie <= csr_in;\n\n      mstatus <= (i_cnt[4:2] == 0) & i_cnt_r[2] & mstatus_mie;\n\n      mtip_r <= i_mtip;\n      o_new_irq <= !mtip_r & timer_irq;\n\n      if (i_trap) begin\n\t mcause31  <= timer_irq;\n\t mcause3_0 <= timer_irq ? 4'd7 :\n\t\t      i_e_op ? {!i_ebreak, 3'b011} :\n\t\t      i_mem_misalign ? {2'b01, i_mem_cmd, 1'b0} :\n\t\t      4'd0;\n      end\n\n      if (i_mcause_en & i_run) begin\n\t if (i_cnt[4:2] == 3'd0)\n\t   mcause3_0 <= {csr_in, mcause3_0[3:1]};\n\t if ((i_cnt[4:2] == 3'd7) & i_cnt_r[3])\n\t   mcause31 <= csr_in;\n      end\n   end\n\nendmodule\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[71, "      mtip_r <= i_mtip;\n"], [72, "      o_new_irq <= !mtip_r & timer_irq;\n"], [74, "      if (i_trap) begin\n"], [75, "\t mcause31  <= timer_irq;\n"], [76, "\t mcause3_0 <= timer_irq ? 4'd7 :\n"]], "Add": [[62, "      /*\n"], [62, "       Note: To save resources mstatus_mpie (mstatus bit 7) is not\n"], [62, "       readable or writable from sw\n"], [62, "       */\n"], [72, "      timer_irq_r <= timer_irq;\n"], [72, "      if (i_mret) begin\n"], [72, "\t mstatus_mie <= mstatus_mpie;\n"], [72, "      end\n"], [76, "      if (i_trap_taken) begin\n"], [76, "\t mstatus_mpie <= mstatus_mie;\n"], [76, "\t mstatus_mie <= 1'b0;\n"], [76, "\t mcause31  <= i_pending_irq;\n"], [76, "\t mcause3_0 <= i_pending_irq ? 4'd7 :\n"]]}}