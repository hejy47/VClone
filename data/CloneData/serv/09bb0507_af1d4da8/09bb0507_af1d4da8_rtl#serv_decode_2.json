{"Source Block": ["serv/rtl/serv_decode.v@303:353@HdlStmProcess", "   reg \tstage_one_done;\n\n   reg \tmtip_r;\n   reg \tpending_irq;\n\n   always @(posedge clk) begin\n      mtip_r <= i_mtip;\n\n      if (i_mtip & !mtip_r & i_timer_irq_en)\n\tpending_irq <= 1'b1;\n\n      cnt_done <= cnt == 30;\n\n      case (state)\n        IDLE : begin\n           if (i_rf_ready) begin\n\t      state <= RUN;\n              if (two_stage_op & !stage_one_done)\n\t\tstate <= INIT;\n\t      if (e_op | pending_irq)\n\t\tstate <= TRAP;\n\t   end\n        end\n        INIT : begin\n\t   stage_one_done <= 1'b1;\n\n           if (cnt_done)\n             state <= (i_mem_misalign | (o_ctrl_jump & i_ctrl_misalign)) ? TRAP :\n\t\t      mem_op ? IDLE : RUN;\n        end\n        RUN : begin\n\t   stage_one_done <= 1'b0;\n           if (cnt_done)\n             state <= IDLE;\n        end\n\tTRAP : begin\n\t   pending_irq <= 1'b0;\n           if (cnt_done)\n             state <= IDLE;\n\tend\n        default : state <= IDLE;\n      endcase\n\n      cnt <= cnt + {4'd0,cnt_en};\n\n      if (i_rst) begin\n\t state <= IDLE;\n\t cnt   <= 5'd0;\n      end\n   end\nendmodule\n"], "Clone Blocks": [], "Diff Content": {"Delete": [[330, "             state <= (i_mem_misalign | (o_ctrl_jump & i_ctrl_misalign)) ? TRAP :\n"]], "Add": [[308, "      if (state == INIT)\n"], [308, "\to_ctrl_jump <= take_branch;\n"], [330, "             state <= (i_mem_misalign | (take_branch & i_ctrl_misalign)) ? TRAP :\n"], [350, "\t pending_irq <= 1'b0;\n"], [350, "\t stage_one_done <= 1'b0;\n"], [350, "\t o_ctrl_jump <= 1'b0;\n"]]}}